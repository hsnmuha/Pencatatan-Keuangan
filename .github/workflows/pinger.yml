name: Keep Supabase Awake

on:
  schedule:
    - cron: "0 0 * * *"   # jalan setiap hari jam 00:00 UTC
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Check if today is the right 5-day interval
        id: interval
        run: |
          DAY=$(($(date +%s) / 86400))
          if (( DAY % 5 != 0 )); then
            echo "Not the 5th day. Skipping ping."
            echo "skip=true" >> $GITHUB_OUTPUT
          fi

      - name: Ping the app
        if: steps.interval.outputs.skip != 'true'
        run: |
          curl -I https://hsnmuha.github.io/Pencatatan-Keuangan/ || true
